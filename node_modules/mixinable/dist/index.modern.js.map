{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["export function define(strategies, mixins) {\n  class Mixinable {\n    constructor(...args) {\n      var mixinstances = (mixins || []).map((Mixin) => {\n        return new Mixin(...args);\n      });\n      Object.keys(strategies || {}).forEach((method) => {\n        this[method] = strategies[method].bind(\n          this,\n          mixinstances.reduce((functions, mixinstance) => {\n            if (isFunction(mixinstance[method])) {\n              functions.push(mixinstance[method].bind(mixinstance));\n            }\n            return functions;\n          }, [])\n        );\n        mixinstances.forEach((mixinstance) => {\n          mixinstance[method] = this[method];\n        });\n      });\n    }\n  }\n\n  return function createMixinable(...args) {\n    return new Mixinable(...args);\n  };\n}\n\nexport function override(functions, ...args) {\n  var fn = functions.slice().pop();\n  if (isFunction(fn)) {\n    return fn(...args);\n  }\n}\n\nexport { override as callable };\n\nexport function parallel(functions, ...args) {\n  var results = functions.map((fn) => {\n    return fn(...args);\n  });\n  return results.find(isPromise) ? Promise.all(results) : results;\n}\n\nexport function pipe(functions, initial, ...args) {\n  return functions.reduce((result, fn) => {\n    if (isPromise(result)) {\n      return result.then((result) => {\n        return fn(result, ...args);\n      });\n    }\n    return fn(result, ...args);\n  }, initial);\n}\n\nexport function compose(functions, ...args) {\n  return pipe(functions.slice().reverse(), ...args);\n}\n\nexport const async = {\n  callable: function callableAsync(...args) {\n    return asynchronize(override)(...args);\n  },\n  override: function overrideAsync(...args) {\n    return asynchronize(override)(...args);\n  },\n  parallel: function parallelAsync(...args) {\n    return asynchronize(parallel)(...args);\n  },\n  pipe: function pipeAsync(...args) {\n    return asynchronize(pipe)(...args);\n  },\n  compose: function composeAsync(...args) {\n    return asynchronize(compose)(...args);\n  },\n};\n\nexport const sync = {\n  callable: function callableSync(...args) {\n    return synchronize(override)(...args);\n  },\n  override: function overrideSync(...args) {\n    return synchronize(override)(...args);\n  },\n  sequence: function sequenceSync(...args) {\n    return synchronize(parallel)(...args);\n  },\n  parallel: function parallelSync(...args) {\n    return synchronize(parallel)(...args);\n  },\n  pipe: function pipeSync(...args) {\n    return synchronize(pipe)(...args);\n  },\n  compose: function composeSync(...args) {\n    return synchronize(compose)(...args);\n  },\n};\n\n// utilities\n\nfunction isFunction(obj) {\n  return typeof obj === 'function';\n}\n\nfunction isPromise(obj) {\n  return obj && isFunction(obj.then) && obj instanceof Promise;\n}\n\nfunction asynchronize(fn) {\n  return function asyncFn(...args) {\n    var obj = fn(...args);\n    return isPromise(obj) ? obj : Promise.resolve(obj);\n  };\n}\n\nfunction synchronize(fn) {\n  return function syncFn(...args) {\n    var obj = fn(...args);\n    if (isPromise(obj)) {\n      throw new Error('got promise in sync mode');\n    }\n    return obj;\n  };\n}\n"],"names":["define","strategies","mixins","Mixinable","constructor","args","mixinstances","map","Mixin","Object","keys","forEach","method","this","bind","reduce","functions","mixinstance","isFunction","push","override","fn","slice","pop","parallel","results","find","isPromise","Promise","all","pipe","initial","result","then","compose","reverse","async","callable","asynchronize","sync","synchronize","sequence","obj","resolve","Error"],"mappings":"SAAgBA,EAAOC,EAAYC,GACjC,MAAMC,EACJC,eAAeC,GACb,IAAIC,GAAgBJ,GAAU,IAAIK,IAAKC,OAC1BA,KAASH,IAEtBI,OAAOC,KAAKT,GAAc,IAAIU,QAASC,IACrCC,KAAKD,GAAUX,EAAWW,GAAQE,KAChCD,KACAP,EAAaS,OAAO,CAACC,EAAWC,KAC1BC,EAAWD,EAAYL,KACzBI,EAAUG,KAAKF,EAAYL,GAAQE,KAAKG,IAEnCD,GACN,KAELV,EAAaK,QAASM,IACpBA,EAAYL,GAAUC,KAAKD,QAMnC,mBAAmCP,GACjC,WAAWF,KAAaE,aAIZe,EAASJ,KAAcX,GACrC,IAAIgB,EAAKL,EAAUM,QAAQC,MAC3B,GAAIL,EAAWG,GACb,OAAOA,KAAMhB,YAMDmB,EAASR,KAAcX,GACrC,IAAIoB,EAAUT,EAAUT,IAAKc,GACpBA,KAAMhB,IAEf,OAAOoB,EAAQC,KAAKC,GAAaC,QAAQC,IAAIJ,GAAWA,WAG1CK,EAAKd,EAAWe,KAAY1B,GAC1C,OAAOW,EAAUD,OAAO,CAACiB,EAAQX,IAC3BM,EAAUK,GACLA,EAAOC,KAAMD,GACXX,EAAGW,KAAW3B,IAGlBgB,EAAGW,KAAW3B,GACpB0B,YAGWG,EAAQlB,KAAcX,GACpC,OAAOyB,EAAKd,EAAUM,QAAQa,aAAc9B,GAGjC+B,MAAAA,EAAQ,CACnBC,SAAU,YAA0BhC,GAClC,OAAOiC,EAAalB,EAAbkB,IAA0BjC,IAEnCe,SAAU,YAA0Bf,GAClC,OAAOiC,EAAalB,EAAbkB,IAA0BjC,IAEnCmB,SAAU,YAA0BnB,GAClC,OAAOiC,EAAad,EAAbc,IAA0BjC,IAEnCyB,KAAM,YAAsBzB,GAC1B,OAAOiC,EAAaR,EAAbQ,IAAsBjC,IAE/B6B,QAAS,YAAyB7B,GAChC,OAAOiC,EAAaJ,EAAbI,IAAyBjC,KAIvBkC,EAAO,CAClBF,SAAU,YAAyBhC,GACjC,OAAOmC,EAAYpB,EAAZoB,IAAyBnC,IAElCe,SAAU,YAAyBf,GACjC,OAAOmC,EAAYpB,EAAZoB,IAAyBnC,IAElCoC,SAAU,YAAyBpC,GACjC,OAAOmC,EAAYhB,EAAZgB,IAAyBnC,IAElCmB,SAAU,YAAyBnB,GACjC,OAAOmC,EAAYhB,EAAZgB,IAAyBnC,IAElCyB,KAAM,YAAqBzB,GACzB,OAAOmC,EAAYV,EAAZU,IAAqBnC,IAE9B6B,QAAS,YAAwB7B,GAC/B,OAAOmC,EAAYN,EAAZM,IAAwBnC,KAMnC,SAASa,EAAWwB,GAClB,MAAsB,mBAARA,EAGhB,SAASf,EAAUe,GACjB,OAAOA,GAAOxB,EAAWwB,EAAIT,OAASS,aAAed,QAGvD,SAASU,EAAajB,GACpB,mBAA2BhB,GACzB,IAAIqC,EAAMrB,KAAMhB,GAChB,OAAOsB,EAAUe,GAAOA,EAAMd,QAAQe,QAAQD,IAIlD,SAASF,EAAYnB,GACnB,mBAA0BhB,GACxB,IAAIqC,EAAMrB,KAAMhB,GAChB,GAAIsB,EAAUe,GACZ,UAAUE,MAAM,4BAElB,OAAOF"}