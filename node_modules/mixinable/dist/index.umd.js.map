{"version":3,"file":"index.umd.js","sources":["../src/index.js"],"sourcesContent":["export function define(strategies, mixins) {\n  class Mixinable {\n    constructor(...args) {\n      var mixinstances = (mixins || []).map((Mixin) => {\n        return new Mixin(...args);\n      });\n      Object.keys(strategies || {}).forEach((method) => {\n        this[method] = strategies[method].bind(\n          this,\n          mixinstances.reduce((functions, mixinstance) => {\n            if (isFunction(mixinstance[method])) {\n              functions.push(mixinstance[method].bind(mixinstance));\n            }\n            return functions;\n          }, [])\n        );\n        mixinstances.forEach((mixinstance) => {\n          mixinstance[method] = this[method];\n        });\n      });\n    }\n  }\n\n  return function createMixinable(...args) {\n    return new Mixinable(...args);\n  };\n}\n\nexport function override(functions, ...args) {\n  var fn = functions.slice().pop();\n  if (isFunction(fn)) {\n    return fn(...args);\n  }\n}\n\nexport { override as callable };\n\nexport function parallel(functions, ...args) {\n  var results = functions.map((fn) => {\n    return fn(...args);\n  });\n  return results.find(isPromise) ? Promise.all(results) : results;\n}\n\nexport function pipe(functions, initial, ...args) {\n  return functions.reduce((result, fn) => {\n    if (isPromise(result)) {\n      return result.then((result) => {\n        return fn(result, ...args);\n      });\n    }\n    return fn(result, ...args);\n  }, initial);\n}\n\nexport function compose(functions, ...args) {\n  return pipe(functions.slice().reverse(), ...args);\n}\n\nexport const async = {\n  callable: function callableAsync(...args) {\n    return asynchronize(override)(...args);\n  },\n  override: function overrideAsync(...args) {\n    return asynchronize(override)(...args);\n  },\n  parallel: function parallelAsync(...args) {\n    return asynchronize(parallel)(...args);\n  },\n  pipe: function pipeAsync(...args) {\n    return asynchronize(pipe)(...args);\n  },\n  compose: function composeAsync(...args) {\n    return asynchronize(compose)(...args);\n  },\n};\n\nexport const sync = {\n  callable: function callableSync(...args) {\n    return synchronize(override)(...args);\n  },\n  override: function overrideSync(...args) {\n    return synchronize(override)(...args);\n  },\n  sequence: function sequenceSync(...args) {\n    return synchronize(parallel)(...args);\n  },\n  parallel: function parallelSync(...args) {\n    return synchronize(parallel)(...args);\n  },\n  pipe: function pipeSync(...args) {\n    return synchronize(pipe)(...args);\n  },\n  compose: function composeSync(...args) {\n    return synchronize(compose)(...args);\n  },\n};\n\n// utilities\n\nfunction isFunction(obj) {\n  return typeof obj === 'function';\n}\n\nfunction isPromise(obj) {\n  return obj && isFunction(obj.then) && obj instanceof Promise;\n}\n\nfunction asynchronize(fn) {\n  return function asyncFn(...args) {\n    var obj = fn(...args);\n    return isPromise(obj) ? obj : Promise.resolve(obj);\n  };\n}\n\nfunction synchronize(fn) {\n  return function syncFn(...args) {\n    var obj = fn(...args);\n    if (isPromise(obj)) {\n      throw new Error('got promise in sync mode');\n    }\n    return obj;\n  };\n}\n"],"names":["override","functions","fn","slice","pop","isFunction","parallel","results","map","find","isPromise","Promise","all","pipe","initial","args","reduce","result","then","compose","reverse","async","sync","callable","synchronize","sequence","obj","asynchronize","resolve","Error","strategies","mixins","Mixinable","mixinstances","Mixin","Object","keys","forEach","method","_this","bind","mixinstance","push"],"mappings":"+sBA4BgBA,EAASC,GACvB,IAAIC,EAAKD,EAAUE,QAAQC,MAC3B,GAAIC,EAAWH,GACb,OAAOA,oDAMKI,EAASL,mBACnBM,EAAUN,EAAUO,IAAI,SAACN,GAC3B,OAAOA,qCAET,OAAOK,EAAQE,KAAKC,GAAaC,QAAQC,IAAIL,GAAWA,WAG1CM,EAAKZ,EAAWa,OAAYC,6BAC1C,OAAOd,EAAUe,OAAO,SAACC,EAAQf,GAC/B,OAAIQ,EAAUO,GACLA,EAAOC,KAAK,SAACD,GAClB,OAAOf,gBAAGe,UAAWF,MAGlBb,gBAAGe,UAAWF,KACpBD,YAGWK,EAAQlB,GACtB,OAAOY,gBAAKZ,EAAUE,QAAQiB,+CAGnBC,IAkBAC,EAAO,CAClBC,SAAU,WACR,OAAOC,EAAYxB,2CAErBA,SAAU,WACR,OAAOwB,EAAYxB,2CAErByB,SAAU,WACR,OAAOD,EAAYlB,2CAErBA,SAAU,WACR,OAAOkB,EAAYlB,2CAErBO,KAAM,WACJ,OAAOW,EAAYX,2CAErBM,QAAS,WACP,OAAOK,EAAYL,4CAMvB,SAASd,EAAWqB,GAClB,MAAsB,mBAARA,EAGhB,SAAShB,EAAUgB,GACjB,OAAOA,GAAOrB,EAAWqB,EAAIR,OAASQ,aAAef,QAGvD,SAASgB,EAAazB,GACpB,kBACE,IAAIwB,EAAMxB,yCACV,OAAOQ,EAAUgB,GAAOA,EAAMf,QAAQiB,QAAQF,IAIlD,SAASF,EAAYtB,GACnB,kBACE,IAAIwB,EAAMxB,yCACV,GAAIQ,EAAUgB,GACZ,UAAUG,MAAM,4BAElB,OAAOH,WA9DU,CACnBH,SAAU,WACR,OAAOI,EAAa3B,2CAEtBA,SAAU,WACR,OAAO2B,EAAa3B,2CAEtBM,SAAU,WACR,OAAOqB,EAAarB,2CAEtBO,KAAM,WACJ,OAAOc,EAAad,2CAEtBM,QAAS,WACP,OAAOQ,EAAaR,uFAzEDW,EAAYC,OAC3BC,EACJ,kCACMC,GAAgBF,GAAU,IAAIvB,IAAI,SAAC0B,GACrC,SAAWA,sBAEbC,OAAOC,KAAKN,GAAc,IAAIO,QAAQ,SAACC,GACrCC,EAAKD,GAAUR,EAAWQ,GAAQE,KAChCD,EACAN,EAAajB,OAAO,SAACf,EAAWwC,GAI9B,OAHIpC,EAAWoC,EAAYH,KACzBrC,EAAUyC,KAAKD,EAAYH,GAAQE,KAAKC,IAEnCxC,GACN,KAELgC,EAAaI,QAAQ,SAACI,GACpBA,EAAYH,GAAUC,EAAKD,QAMnC,kBACE,SAAWN"}